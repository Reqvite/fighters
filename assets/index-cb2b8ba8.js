var I=Object.defineProperty;var L=(t,e,n)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h=(t,e,n)=>(L(t,typeof e!="symbol"?e+"":e,n),n),K=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var _=(t,e,n)=>(K(t,e,"read from private field"),n?n.call(t):e.get(t)),w=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();function s({tagName:t,className:e,attributes:n={}}){const i=document.createElement(t);if(e){const a=e.split(" ").filter(Boolean);i.classList.add(...a)}return Object.keys(n).forEach(a=>i.setAttribute(a,n[a])),i}const c={PlayerOneAttack:"KeyA",PlayerOneBlock:"KeyD",PlayerTwoAttack:"KeyJ",PlayerTwoBlock:"KeyL",PlayerOneCriticalHitCombination:["KeyQ","KeyW","KeyE"],PlayerTwoCriticalHitCombination:["KeyU","KeyI","KeyO"]};async function M(t,e){return t===e&&(e=JSON.parse(JSON.stringify(e))),t.lastCriticalHitTime=0,e.lastCriticalHitTime=0,new Promise(n=>{const i=document.getElementById("left-fighter-indicator"),a=document.getElementById("right-fighter-indicator"),r=new Set,o=l=>{if(l.repeat)return;const g=l.code===c.PlayerOneAttack||c.PlayerOneCriticalHitCombination.includes(l.code)?e:t,H=l.code===c.PlayerOneAttack||c.PlayerOneCriticalHitCombination.includes(l.code)?a:i;r.add(l.code);const O=x(l,t,e,r);D(g,H,O),(t.hpLeft===0||e.hpLeft===0)&&(document.removeEventListener("keydown",o),n(t.hpLeft>0?t:e))},m=l=>{l.code===c.PlayerOneBlock?t.isBlocking=!1:l.code===c.PlayerTwoBlock?e.isBlocking=!1:(c.PlayerOneCriticalHitCombination.some(g=>r.has(g))||c.PlayerTwoCriticalHitCombination.some(g=>r.has(g)))&&r.clear()};document.addEventListener("keyup",m),document.addEventListener("keydown",o)})}function v(t,e){const n=B(t),i=A(e);return Math.max(0,n-i)}function B(t){const e=Math.random()*1+1;return t.attack*e}function A(t){const e=Math.random()*1+1;return t.defense*e}function N(t){const e=2*B(t);return Math.max(0,e)}function b(t){return new Date().getTime()-t>1e4}function D(t,e,n){const i=t.health,{hpLeft:a}=t,r=Math.max(0,a?a-n:i-n);t.hpLeft=r;const o=`${r*100/i}%`;return e.style.width=o,r}function x(t,e,n,i){const a=b(e.lastCriticalHitTime)&&c.PlayerOneCriticalHitCombination.every(o=>i.has(o)),r=b(n.lastCriticalHitTime)&&c.PlayerTwoCriticalHitCombination.every(o=>i.has(o));if(a)return e.lastCriticalHitTime=new Date().getTime(),N(e);if(r)return n.lastCriticalHitTime=new Date().getTime(),N(e);switch(t.code){case c.PlayerOneAttack:return e.isBlocking||n.isBlocking?0:v(e,n);case c.PlayerTwoAttack:return n.isBlocking||e.isBlocking?0:v(n,e);case c.PlayerOneBlock:return e.isBlocking=!0,0;case c.PlayerTwoBlock:return n.isBlocking=!0,0;default:return 0}}function E(t,e){const i=s({tagName:"div",className:`fighter-preview___root ${e==="right"?"fighter-preview___right":"fighter-preview___left"}`});if(t){const a=y(t);e==="right"&&(a.style.transform="scale(-1, 1)"),i.append(a),Object.keys(t).filter(o=>o!=="_id"&&o!=="source").forEach(o=>{const m=s({tagName:"span"});m.style.color="white",m.innerText=`${o.toUpperCase()} : ${t[o]}`,i.append(m)})}return i}function y(t){const{source:e,name:n}=t;return s({tagName:"img",className:"fighter-preview___img",attributes:{src:e,title:n,alt:n}})}function S(){return document.getElementById("root")}function $(){const t=document.getElementsByClassName("modal-layer")[0];t==null||t.remove()}function j(t,e){const n=s({tagName:"div",className:"modal-header"}),i=s({tagName:"span"}),a=s({tagName:"div",className:"close-btn"});i.innerText=t,a.innerText="Ã—";const r=()=>{$(),e()};return a.addEventListener("click",r),n.append(i,a),n}function q({title:t,bodyElement:e,onClose:n}){const i=s({tagName:"div",className:"modal-layer"}),a=s({tagName:"div",className:"modal-root"}),r=j(t,n);return a.append(r,e),i.append(a),i}function R({title:t,bodyElement:e,onClose:n=()=>{}}){const i=S(),a=q({title:t,bodyElement:e,onClose:n});i.append(a)}function J(t){const e=y(t),n=`${t.name.toUpperCase()} WIN!`;R({title:n,bodyElement:e})}function C(t,e){const n=y(t),a=s({tagName:"div",className:`arena___fighter ${e==="right"?"arena___right-fighter":"arena___left-fighter"}`});return a.append(n),a}function U(t,e){const n=s({tagName:"div",className:"arena___battlefield"}),i=C(t,"left"),a=C(e,"right");return n.append(i,a),n}function k(t,e){const{name:n}=t,i=s({tagName:"div",className:"arena___fighter-indicator"}),a=s({tagName:"span",className:"arena___fighter-name"}),r=s({tagName:"div",className:"arena___health-indicator"}),o=s({tagName:"div",className:"arena___health-bar",attributes:{id:`${e}-fighter-indicator`}});return a.innerText=n,r.append(o),i.append(a,r),i}function W(t,e){const n=s({tagName:"div",className:"arena___fight-status"}),i=s({tagName:"div",className:"arena___versus-sign"}),a=k(t,"left"),r=k(e,"right");return n.append(a,i,r),n}function G(t){const e=s({tagName:"div",className:"arena___root"}),n=W(...t),i=U(...t);return e.append(n,i),e}function Y(t){const e=document.getElementById("root"),n=G(t);e.innerHTML="",e.append(n),M(...t).then(i=>{J(i)})}const Z="/sf/assets/versus-768a076e.png",F=[{_id:"1",name:"Ryu",source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}],Q=[{_id:"1",name:"Ryu",health:45,attack:4,defense:3,source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",health:60,attack:3,defense:1,source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",health:45,attack:4,defense:3,source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",health:60,attack:4,defense:1,source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",health:45,attack:3,defense:4,source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",health:45,attack:5,defense:4,source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}];function V(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf(".json"),i=t.substring(e+1,n);return Q.find(a=>a._id===i)}async function z(t){const e=t==="fighters.json"?F:V(t);return new Promise((n,i)=>{setTimeout(()=>e?n(e):i(Error("Failed to load")),500)})}async function P(t,e="GET"){return z(t)}var f;class X{constructor(){w(this,f,"fighters.json")}async getFighters(){try{return await P(_(this,f))}catch(e){throw e}}async getFighterDetails(e){try{const n=`details/fighter/${e}.json`;return await P(n)}catch(n){throw n}}}f=new WeakMap;const T=new X,p=new Map;async function ee(t){if(p.has(t))return p.get(t);const e=await T.getFighterDetails(t);return p.set(t,e),e}function te(t){Y(t)}function ne(t){const e=t.filter(Boolean).length===2,n=()=>te(t),i=s({tagName:"div",className:"preview-container___versus-block"}),a=s({tagName:"img",className:"preview-container___versus-img",attributes:{src:Z}}),o=s({tagName:"button",className:`preview-container___fight-btn ${e?"":"disabled"}`});return o.addEventListener("click",n,!1),o.innerText="Fight",i.append(a,o),i}function ae(t){const e=document.querySelector(".preview-container___root"),[n,i]=t,a=E(n,"left"),r=E(i,"right"),o=ne(t);e.innerHTML="",e.append(a,o,r)}function ie(){let t=[];return async(e,n)=>{const i=await ee(n),[a,r]=t;t=[a??i,a?r??i:r],ae(t)}}function re(t){const{source:e,name:n}=t;return s({tagName:"img",className:"fighter___fighter-image",attributes:{src:e,title:n,alt:n}})}function oe(t,e){const n=s({tagName:"div",className:"fighters___fighter"}),i=re(t),a=r=>e(r,t._id);return n.append(i),n.addEventListener("click",a,!1),n}function se(t){const e=ie(),n=s({tagName:"div",className:"fighters___root"}),i=s({tagName:"div",className:"preview-container___root"}),a=s({tagName:"div",className:"fighters___list"}),r=t.map(o=>oe(o,e));return a.append(...r),n.append(i,a),n}const d=class{static async startApp(){try{d.loadingElement.style.visibility="visible";const e=await T.getFighters(),n=se(e);d.rootElement.appendChild(n)}catch(e){console.warn(e),d.rootElement.innerText="Failed to load data"}finally{d.loadingElement.style.visibility="hidden"}}};let u=d;h(u,"rootElement",document.getElementById("root")),h(u,"loadingElement",document.getElementById("loading-overlay"));u.startApp();
